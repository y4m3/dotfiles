# Project Overview

chezmoi-managed dotfiles repository for Ubuntu (with future cross-platform support planned).

## Key Commands

```bash
# Development
make dev          # Interactive shell in Docker container
make test         # Run tests for changed files only
make test-all     # Run all tests (creates snapshot on success)
make lint         # Run shellcheck
make format       # Run shfmt

# Validation
chezmoi data | jq           # View template variables
chezmoi apply --dry-run -v  # Preview changes
chezmoi diff                # Show differences
```

## Architecture

```
.
├── home/                    # Files to be copied to ~/
│   ├── .chezmoi.toml.tmpl   # Profile variable (client/server)
│   ├── .chezmoiscripts/     # Install scripts (run_onchange_client_ubuntu_*)
│   └── dot_*                # Dotfiles (dot_bashrc, dot_bashrc.d/, etc.)
├── scripts/                 # Helper scripts for Makefile
├── tests/                   # Test scripts
├── Dockerfile               # Test environment
└── Makefile                 # Task runner (future: Justfile)
```

## Coding Conventions

- Shell scripts: bash with `set -euo pipefail`
- Indentation: 4 spaces for shell scripts
- Naming: `run_onchange_{profile}_{os}_{number}-{name}.sh.tmpl`
- Template guards: Use empty template pattern for OS/profile checks

## Git Commit Guidelines

- Check `git log` before committing to understand commit style and appropriate granularity
- Use meaningful, atomic commits - split large changes into multiple commits when appropriate
- Follow existing commit message conventions (e.g., `fix(scope): message`, `feat(scope): message`)
- Write commit messages in English
- Do not add AI attribution or "generated by" messages to commits

## Design Document

Migration plan is in `.claude/CLAUDE.local.md` (local only, not git tracked).
Always refer to this document when working on migration tasks.
