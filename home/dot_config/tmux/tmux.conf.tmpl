{{- if eq .chezmoi.os "linux" -}}
# =============================================================================
# tmux Configuration
# Path: ~/.config/tmux/tmux.conf
# Designed to match Zellij keybindings as closely as possible
# =============================================================================

# =============================================================================
# tmux-sensible equivalent settings (without keybindings)
# =============================================================================

# --- Server Options ---
set -s escape-time 0                    # No ESC delay (Neovim compatibility)
set -s default-terminal "tmux-256color" # 256 color support

# --- Global Options ---
set -g history-limit 100000             # Scrollback buffer (matches Zellij)
set -g display-time 4000                # Message display time (4 seconds)
set -g status-interval 5                # Status refresh interval (5 seconds)
set -g focus-events on                  # Neovim autoread support
set -g status-keys emacs                # Command line uses emacs style

# --- Window Options ---
setw -g aggressive-resize on            # Resize for multi-client access

# =============================================================================
# General Settings
# =============================================================================

# Enable mouse support (matches Zellij mouse_mode)
set -g mouse on

# Vi mode for copy (matches Zellij vim-like navigation)
setw -g mode-keys vi

# Start window/pane index at 1 (matches Zellij 1-indexed tabs)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Enable clipboard integration
set -g set-clipboard on

# True color support for terminals that support it
set -ga terminal-overrides ",*256col*:Tc"
set -ga terminal-overrides ",alacritty:Tc"
set -ga terminal-overrides ",xterm-256color:Tc"

# =============================================================================
# Prefix Key: Ctrl+a (matches Zellij tmux mode)
# =============================================================================
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# =============================================================================
# Load Configuration Modules
# =============================================================================

# Key bindings (prefix-based operations)
source-file ~/.config/tmux/keybindings.conf

# Submodes (Resize/Tab/Pane/Move modes)
source-file ~/.config/tmux/submodes.conf

# Appearance (Tokyo Night Storm theme)
source-file ~/.config/tmux/appearance.conf

# Plugins (TPM, resurrect, continuum, yank)
source-file ~/.config/tmux/plugins.conf
{{- end -}}
